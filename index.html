<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">

    <!-- ✅ مهم جدًا لتوافق الجوال -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>لعبة أجزاء جسم الإنسان التفاعلية</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(to bottom, #e6f3ff, #ffffff);
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #1a4b82;
            margin-bottom: 5px;
            font-size: 26px;
        }

        h2 {
            color: #333;
            margin-top: 0;
            font-size: 16px;
            font-weight: normal;
        }

        .top-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0 25px 0;
            flex-wrap: wrap;
        }

        .info-box {
            background: #ffffff;
            border-radius: 10px;
            padding: 10px 15px;
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
            font-size: 14px;
        }

        .container {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 12px rgba(0,0,0,0.15);
            background: #fdfdfd;
            max-width: 100%;
        }

        #body-img {
            width: 300px;
            max-width: 90%;
        }

        .part {
            position: absolute;
            cursor: pointer;
            border: 2px solid transparent;
            transition: 0.2s;
        }

        .part:hover {
            border: 2px solid #ffeb3b;
            background-color: rgba(255, 235, 59, 0.25);
        }

        #question-box {
            margin: 0 auto;
            padding: 15px 20px;
            border-radius: 12px;
            border: 2px solid #1a4b82;
            width: 90%;
            max-width: 360px;
            background: #ffffff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        #question {
            font-size: 18px;
            color: #333;
        }

        #result {
            font-size: 22px;
            font-weight: bold;
            margin-top: 10px;
            min-height: 28px;
        }

        .btn {
            padding: 10px 18px;
            margin-top: 12px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 15px;
            font-weight: bold;
        }

        .btn-primary {
            background-color: #1a4b82;
            color: white;
        }

        .highlight-correct {
            outline: 3px solid #4caf50;
            background-color: rgba(76, 175, 80, 0.25);
        }

        .highlight-wrong {
            outline: 3px solid #f44336;
            background-color: rgba(244, 67, 54, 0.25);
        }
    </style>
</head>

<body>

    <h1>لعبة أجزاء جسم الإنسان</h1>
    <h2>اضغط على الجزء الصحيح للإجابة</h2>

    <div class="top-bar">
        <div class="info-box">النقاط: <span id="score">0</span></div>
        <div class="info-box">السؤال: <span id="question-number">1</span> / <span id="total-questions">0</span></div>
        <div class="info-box">الوقت: <span id="timer">10</span> ثانية</div>
    </div>

    <div class="container">
        <img id="body-img" src="human.png" alt="جسم الإنسان">

        <!-- ✅ نفس أماكن الأجزاء -->
        <div class="part" id="head" style="top: 25px; left: 130px; width: 60px; height: 70px;" onclick="partClicked('head')"></div>
        <div class="part" id="left-arm" style="top: 120px; left: 60px; width: 50px; height: 120px;" onclick="partClicked('arm')"></div>
        <div class="part" id="right-arm" style="top: 120px; left: 210px; width: 50px; height: 120px;" onclick="partClicked('arm')"></div>
        <div class="part" id="torso" style="top: 120px; left: 130px; width: 60px; height: 130px;" onclick="partClicked('torso')"></div>
        <div class="part" id="left-leg" style="top: 260px; left: 130px; width: 30px; height: 130px;" onclick="partClicked('leg')"></div>
        <div class="part" id="right-leg" style="top: 260px; left: 160px; width: 30px; height: 130px;" onclick="partClicked('leg')"></div>
    </div>

    <div id="question-box">
        <p id="question">انقر على الجزء المسؤول عن التفكير.</p>
        <p id="result"></p>
        <button class="btn btn-primary" id="restart-btn" onclick="restartGame()" style="display:none;">إعادة اللعب</button>
    </div>

    <!-- ✅ ملفات الصوت -->
    <audio id="correct-sound">
        <source src="correct.mp3" type="audio/mpeg">
    </audio>

    <audio id="wrong-sound">
        <source src="wrong.mp3" type="audio/mpeg">
    </audio>

    <script>
        const quiz = [
            { q: "انقر على الجزء المسؤول عن التفكير.", a: "head" },
            { q: "انقر على الجزء الذي يساعدك في حمل الأشياء.", a: "arm" },
            { q: "انقر على الجزء الذي يساعدك في المشي والجري.", a: "leg" },
            { q: "انقر على الجزء الذي يحتوي على الصدر والبطن.", a: "torso" },
            { q: "انقر على الجزء الذي يحتوي على الدماغ.", a: "head" },
            { q: "انقر على الجزء الذي يتحرك عند تأرجح الذراعين.", a: "arm" }
        ];

        let index = 0;
        let score = 0;
        let timeLeft = 10;
        let timerId = null;
        let acceptingAnswers = true;

        window.onload = function () {
            document.getElementById("total-questions").textContent = quiz.length;
            loadQuestion();
        };

        function loadQuestion() {
            clearHighlights();

            if (index >= quiz.length) {
                endGame();
                return;
            }

            document.getElementById("question").textContent = quiz[index].q;
            document.getElementById("question-number").textContent = index + 1;
            document.getElementById("result").textContent = "";

            resetTimer();
            startTimer();

            acceptingAnswers = true;
        }

        function partClicked(partName) {
            if (!acceptingAnswers) return;

            acceptingAnswers = false;
            stopTimer();

            const correct = quiz[index].a;
            const result = document.getElementById("result");

            if (partName === correct) {
                score++;
                document.getElementById("score").textContent = score;
                result.textContent = "إجابة صحيحة!";
                result.style.color = "green";
                playSound("correct-sound");
            } else {
                result.textContent = "إجابة خاطئة!";
                result.style.color = "red";
                playSound("wrong-sound");
            }

            setTimeout(() => {
                index++;
                loadQuestion();
            }, 1500);
        }

        function startTimer() {
            timeLeft = 10;
            document.getElementById("timer").textContent = timeLeft;

            timerId = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    handleTimeUp();
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(timerId);
            timeLeft = 10;
            document.getElementById("timer").textContent = timeLeft;
        }

        function stopTimer() {
            clearInterval(timerId);
        }

        function handleTimeUp() {
            document.getElementById("result").textContent = "انتهى الوقت!";
            document.getElementById("result").style.color = "#f57c00";

            setTimeout(() => {
                index++;
                loadQuestion();
            }, 1500);
        }

        function endGame() {
            document.getElementById("question").textContent = "انتهت اللعبة!";
            document.getElementById("result").textContent = "درجتك: " + score + " من " + quiz.length;
            document.getElementById("restart-btn").style.display = "inline-block";
        }

        function restartGame() {
            index = 0;
            score = 0;
            document.getElementById("score").textContent = score;
            loadQuestion();
        }

        function clearHighlights() {
            document.querySelectorAll(".part").forEach(p => {
                p.classList.remove("highlight-correct", "highlight-wrong");
            });
        }

        function playSound(id) {
            const audio = document.getElementById(id);
            audio.currentTime = 0;
            audio.play().catch(() => {});
        }
    </script>

</body>
</html>