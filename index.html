<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لعبة أجزاء جسم الإنسان التفاعلية</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(to bottom, #e6f3ff, #ffffff);
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #1a4b82;
            margin-bottom: 5px;
        }

        h2 {
            color: #333;
            margin-top: 0;
            font-size: 16px;
            font-weight: normal;
        }

        .top-bar {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 15px 0 25px 0;
            flex-wrap: wrap;
        }

        .info-box {
            background: #ffffff;
            border-radius: 10px;
            padding: 10px 20px;
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
            font-size: 15px;
        }

        .info-label {
            font-weight: bold;
            color: #555;
        }

        .info-value {
            color: #1a4b82;
            font-weight: bold;
            margin-left: 5px;
        }

        .container {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 12px rgba(0,0,0,0.15);
            background: #fdfdfd;
        }

        #body-img {
            width: 320px;
            display: block;
        }

        .part {
            position: absolute;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border 0.2s, background-color 0.2s, transform 0.1s;
        }

        .part:hover {
            border: 2px solid #ffeb3b;
            background-color: rgba(255, 235, 59, 0.25);
        }

        .part:active {
            transform: scale(0.97);
        }

        #question-box {
            margin: 0 auto;
            padding: 15px 20px;
            border-radius: 12px;
            border: 2px solid #1a4b82;
            width: 360px;
            background: #ffffff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        #question {
            font-size: 18px;
            color: #333;
            margin-bottom: 10px;
        }

        #result {
            font-size: 22px;
            font-weight: bold;
            margin-top: 5px;
            min-height: 28px;
        }

        .btn {
            padding: 8px 16px;
            margin-top: 12px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: background-color 0.2s, transform 0.1s;
        }

        .btn-primary {
            background-color: #1a4b82;
            color: white;
        }

        .btn-primary:hover {
            background-color: #14507d;
        }

        .btn-primary:active {
            transform: scale(0.97);
        }

        .correct-anim {
            animation: correctPulse 0.6s ease-out;
        }

        .wrong-anim {
            animation: wrongShake 0.4s ease-out;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.08); }
            100% { transform: scale(1); }
        }

        @keyframes wrongShake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .highlight-correct {
            outline: 3px solid #4caf50;
            background-color: rgba(76, 175, 80, 0.25);
        }

        .highlight-wrong {
            outline: 3px solid #f44336;
            background-color: rgba(244, 67, 54, 0.25);
        }

        .game-over {
            font-size: 22px;
            color: #1a4b82;
            font-weight: bold;
            margin-top: 10px;
        }

        .small-note {
            font-size: 12px;
            color: #777;
            margin-top: 6px;
        }
    </style>
</head>
<body>

    <h1>لعبة أجزاء جسم الإنسان</h1>
    <h2>اضغط على الجزء الصحيح للإجابة</h2>

    <div class="top-bar">
        <div class="info-box">
            <span class="info-label">النقاط:</span>
            <span class="info-value" id="score">0</span>
        </div>
        <div class="info-box">
            <span class="info-label">السؤال:</span>
            <span class="info-value" id="question-number">1</span>
            <span>/</span>
            <span id="total-questions">0</span>
        </div>
        <div class="info-box">
            <span class="info-label">الوقت المتبقي:</span>
            <span class="info-value" id="timer">10</span>
            <span>ثانية</span>
        </div>
    </div>

    <div class="container">
        <img id="body-img" src="human.png" alt="جسم الإنسان">

        <div class="part" id="head"
             style="top: 25px; left: 130px; width: 60px; height: 70px;"
             onclick="partClicked('head')"></div>

        <div class="part" id="left-arm"
             style="top: 120px; left: 60px; width: 50px; height: 120px;"
             onclick="partClicked('arm')"></div>

        <div class="part" id="right-arm"
             style="top: 120px; left: 210px; width: 50px; height: 120px;"
             onclick="partClicked('arm')"></div>

        <div class="part" id="torso"
             style="top: 120px; left: 130px; width: 60px; height: 130px;"
             onclick="partClicked('torso')"></div>

        <div class="part" id="left-leg"
             style="top: 260px; left: 130px; width: 30px; height: 130px;"
             onclick="partClicked('leg')"></div>

        <div class="part" id="right-leg"
             style="top: 260px; left: 160px; width: 30px; height: 130px;"
             onclick="partClicked('leg')"></div>
    </div>

    <div id="question-box">
        <p id="question">انقر على الجزء المسؤول عن التفكير.</p>
        <p id="result"></p>
        <button class="btn btn-primary" id="restart-btn" onclick="restartGame()" style="display:none;">
            إعادة اللعب
        </button>
        <p class="small-note">لديك 10 ثوانٍ لكل سؤال.</p>
    </div>

    <!-- ✅ ملفات الصوت بالأسماء الصحيحة -->
    <audio id="correct-sound">
        <source src="correct.mp3" type="audio/mpeg">
    </audio>

    <audio id="wrong-sound">
        <source src="wrong.mp3" type="audio/mpeg">
    </audio>

    <script>
        const quiz = [
            { q: "انقر على الجزء المسؤول عن التفكير.", a: "head" },
            { q: "انقر على الجزء الذي يساعدك في حمل الأشياء.", a: "arm" },
            { q: "انقر على الجزء الذي يساعدك في المشي والجري.", a: "leg" },
            { q: "انقر على الجزء الذي يحتوي على الصدر والبطن.", a: "torso" },
            { q: "انقر على الجزء الذي يحتوي على الدماغ.", a: "head" },
            { q: "انقر على الجزء الذي يتحرك عند تأرجح الذراعين.", a: "arm" }
        ];

        let index = 0;
        let score = 0;
        let timeLeft = 10;
        let timerId = null;
        let acceptingAnswers = true;

        window.onload = function () {
            document.getElementById("total-questions").textContent = quiz.length;
            loadQuestion();
        };

        function loadQuestion() {
            clearHighlights();

            if (index >= quiz.length) {
                endGame();
                return;
            }

            const current = quiz[index];
            document.getElementById("question").textContent = current.q;
            document.getElementById("question-number").textContent = index + 1;
            document.getElementById("result").textContent = "";
            document.getElementById("restart-btn").style.display = "none";

            resetTimer();
            startTimer();

            acceptingAnswers = true;
        }

        function partClicked(partName) {
            if (!acceptingAnswers) return;

            acceptingAnswers = false;
            stopTimer();

            const correctAnswer = quiz[index].a;
            const resultEl = document.getElementById("result");

            const allParts = document.getElementsByClassName("part");

            if (partName === correctAnswer) {
                score++;
                document.getElementById("score").textContent = score;
                resultEl.textContent = "إجابة صحيحة!";
                resultEl.style.color = "#4caf50";
                resultEl.className = "correct-anim";

                playSound("correct-sound");

                for (let p of allParts) {
                    if (getLogicalName(p.id) === correctAnswer) {
                        p.classList.add("highlight-correct");
                    }
                }

            } else {
                resultEl.textContent = "إجابة خاطئة!";
                resultEl.style.color = "#f44336";
                resultEl.className = "wrong-anim";

                playSound("wrong-sound");

                highlightWrong(partName);

                for (let p of allParts) {
                    if (getLogicalName(p.id) === correctAnswer) {
                        p.classList.add("highlight-correct");
                    }
                }
            }

            setTimeout(() => {
                index++;
                loadQuestion();
            }, 1500);
        }

        function getLogicalName(id) {
            if (id === "head") return "head";
            if (id === "left-arm" || id === "right-arm") return "arm";
            if (id === "torso") return "torso";
            if (id === "left-leg" || id === "right-leg") return "leg";
            return "";
        }

        function highlightWrong(partName) {
            const allParts = document.getElementsByClassName("part");
            for (let p of allParts) {
                if (getLogicalName(p.id) === partName) {
                    p.classList.add("highlight-wrong");
                }
            }
        }

        function clearHighlights() {
            const allParts = document.getElementsByClassName("part");
            for (let p of allParts) {
                p.classList.remove("highlight-correct", "highlight-wrong");
            }
        }

        function startTimer() {
            timeLeft = 10;
            document.getElementById("timer").textContent = timeLeft;

            timerId = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    timerId = null;
                    handleTimeUp();
                }
            }, 1000);
        }

        function resetTimer() {
            if (timerId !== null) {
                clearInterval(timerId);
                timerId = null;
            }
            timeLeft = 10;
            document.getElementById("timer").textContent = timeLeft;
        }

        function stopTimer() {
            if (timerId !== null) {
                clearInterval(timerId);
                timerId = null;
            }
        }

        function handleTimeUp() {
            if (!acceptingAnswers) return;
            acceptingAnswers = false;

            const resultEl = document.getElementById("result");
            resultEl.textContent = "انتهى الوقت!";
            resultEl.style.color = "#f57c00";
            resultEl.className = "wrong-anim";

            const correctAnswer = quiz[index].a;
            const allParts = document.getElementsByClassName("part");
            for (let p of allParts) {
                if (getLogicalName(p.id) === correctAnswer) {
                    p.classList.add("highlight-correct");
                }
            }

            setTimeout(() => {
                index++;
                loadQuestion();
            }, 1500);
        }

        function endGame() {
            stopTimer();
            clearHighlights();
            const questionEl = document.getElementById("question");
            const resultEl = document.getElementById("result");
            const total = quiz.length;

            questionEl.innerHTML = "انتهت اللعبة!";
            resultEl.innerHTML = "درجتك النهائية: " + score + " من " + total;
            resultEl.style.color = "#1a4b82";
            resultEl.className = "game-over";
            document.getElementById("restart-btn").style.display = "inline-block";
        }

        function restartGame() {
            score = 0;
            index = 0;
            document.getElementById("score").textContent = score;
            loadQuestion();
        }

        function playSound(id) {
            const audio = document.getElementById(id);
            if (!audio) return;
            audio.currentTime = 0;
            audio.play().catch(() => {
                console.log("المتصفح منع تشغيل الصوت");
            });
        }
    </script>

</body>
</html>